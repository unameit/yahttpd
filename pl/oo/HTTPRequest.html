<html>
<head>
</head><BODY BACKGROUND="../ltbrush.gif">
<p><hr></p>
<a name=HTTPRequest><h2>Class HTTPRequest</h2></a>
<font face="Courier New,Courier">class HTTPRequest</font>
<dl>
<dt><b>Documentation </b><dd>Obiekt tej klasy zajmuje się parsowaniem zapytania klienta, zrozumieniem
<dd>go oraz wygenerowaniem właściwej odpowiedzi (zgodnie z protokołem HTTP). 
<dd>Wskazuje też oraz otwiera plik, którego wysłaniem zająć się ma obiekt
<dd>HTTPConnection.
</dl>
<h3><b>Links</h3></b>
<ul><li><b>Aggregation file to </b><a href=File.html#File>File</a></li></ul>
<dir><dt><b>Documentation </b>a tu jest ewentualnie ten plik.
</dir>
<ul><li><b>Aggregation fileinfo to </b><a href=FileInfo.html#FileInfo>FileInfo</a></li></ul>
<dir><dt><b>Documentation </b>tu pamiętamy dane o pliku, którym interesuje się klient
</dir>
<ul><li><b>Association mimeTypes to </b><a href=Properties.html#Properties>Properties</a></li></ul>
<dir><dt><b>Supplier cardinality </b>0..1</dt>
<dt><b>Documentation </b>Obiekt 'rozpoznający' typy plików po rozszerzeniach ich nazwy.
</dir>
<h3><b>Attributes</h3></b>
<a name=documentRoot#HTTPRequest><ul><li><b>documentRoot</b></li></ul>
</a><dir><font face="Courier New,Courier"><font size=-1>private const char * const documentRoot</font></font><p>  </p>
<dl>
<dt><b>Documentation </b>Gdzie skłaowane są dokumenty z głównego drzewa.
</dl>
</dir><a name=haveContent#HTTPRequest><ul><li><b>haveContent</b></li></ul>
</a><dir><font face="Courier New,Courier"><font size=-1>private bool haveContent</font></font><p>  </p>
<dl>
<dt><b>Documentation </b>wysyłamy coś oprócz nagłówka? / wysyłamy plik?
</dl>
</dir><a name=hdr200#HTTPRequest><ul><li><b>hdr200</b></li></ul>
</a><dir><font face="Courier New,Courier"><font size=-1>private const ResponseHeader hdr200</font></font><p>  </p>
<dl>
</dl>
</dir><a name=hdr301#HTTPRequest><ul><li><b>hdr301</b></li></ul>
</a><dir><font face="Courier New,Courier"><font size=-1>private const ResponseHeader hdr301</font></font><p>  </p>
<dl>
</dl>
</dir><a name=hdr400#HTTPRequest><ul><li><b>hdr400</b></li></ul>
</a><dir><font face="Courier New,Courier"><font size=-1>private const ResponseHeader hdr400</font></font><p>  </p>
<dl>
</dl>
</dir><a name=hdr404#HTTPRequest><ul><li><b>hdr404</b></li></ul>
</a><dir><font face="Courier New,Courier"><font size=-1>private const ResponseHeader hdr404</font></font><p>  </p>
<dl>
</dl>
</dir><a name=hdr501#HTTPRequest><ul><li><b>hdr501</b></li></ul>
</a><dir><font face="Courier New,Courier"><font size=-1>private const ResponseHeader hdr501</font></font><p>  </p>
<dl>
</dl>
</dir><a name=hostName#HTTPRequest><ul><li><b>hostName</b></li></ul>
</a><dir><font face="Courier New,Courier"><font size=-1>private const char * const hostName</font></font><p>  </p>
<dl>
<dt><b>Documentation </b>Nazwa komputera na którym jesteśmy uruchomieni - potrzebna w polu Location odpowiedzi HTTP.
</dl>
</dir><a name=method#HTTPRequest><ul><li><b>method</b></li></ul>
</a><dir><font face="Courier New,Courier"><font size=-1>private char[10] method</font></font><p>  </p>
<dl>
</dl>
</dir><a name=sendFile#HTTPRequest><ul><li><b>sendFile</b></li></ul>
</a><dir><font face="Courier New,Courier"><font size=-1>private bool sendFile</font></font><p>  </p>
<dl>
<dt><b>Documentation </b>wysyłamy coś oprócz nagłówka? / wysyłamy plik?
</dl>
</dir><a name=uri#HTTPRequest><ul><li><b>uri</b></li></ul>
</a><dir><font face="Courier New,Courier"><font size=-1>private char[500] uri</font></font><p>  </p>
<dl>
</dl>
</dir><a name=userDir#HTTPRequest><ul><li><b>userDir</b></li></ul>
</a><dir><font face="Courier New,Courier"><font size=-1>private const char * const userDir</font></font><p>  </p>
<dl>
<dt><b>Documentation </b>W którym katalogu w katalgoach użytkowników szukać index.html i innych dokumentów.
</dl>
</dir><h3><b>Operations</h3></b>
<a name=HTTPRequest#const_char_*#const_Properties_*#const_char_*#const_char_*#HTTPRequest><ul><li><b>HTTPRequest</b></li></ul>
</a><dir><font face="Courier New,Courier"><font size=-1>public  HTTPRequest(const char * hostName, const Properties * mimeTypes, const char * documentRoot, const char * userDir)</font></font><p>  </p>
<dl>
<dt><b>Documentation </b><dd>Standardowy konstruktor, w którym podajemy wskaźniki do później
<dd>wykorzystywanych obiektów.
</dl>
</dir><a name=generateResponseHeader#char_*#uint#const_ResponseHeader_&#const_char_*#ulong#const_char_*#time_t#HTTPRequest><ul><li><b>generateResponseHeader</b></li></ul>
</a><dir><font face="Courier New,Courier"><font size=-1>private void generateResponseHeader(char * buffer, uint bufferLength, const ResponseHeader & hdr, const char * location, ulong contentLength, const char * contentType, time_t mtime)</font></font><p>  </p>
<dl>
<dt><b>Documentation </b>Metoda generuje nagłówke odpowiedzi korzystając z podanych obiektów.
</dl>
</dir><a name=getFile#HTTPRequest><ul><li><b>getFile</b></li></ul>
</a><dir><font face="Courier New,Courier"><font size=-1>public File * getFile()</font></font><p>  </p>
<dl>
<dt><b>Documentation </b><dd>Metoda ta zwraca wskaźnik do obiektu File, którego zawartość należy
<dd>wysłać, zaraz za nagłówkiem.  Zwraca NULL jeśli nie należy nic więcej
<dd>(poza nagłówkiem) wysyłać.  Jeśli skończę z plikiem, to sam go zamknę
<dd>- Ty więc o jego zamykanie nie musisz martwić.
</dl>
</dir><a name=getMethod#HTTPRequest><ul><li><b>getMethod</b></li></ul>
</a><dir><font face="Courier New,Courier"><font size=-1>public const char * getMethod()</font></font><p>  </p>
<dl>
<dt><b>Documentation </b>Zwraca metodę bieżącego zapytania. Metoda na potrzeby wpisu w pliku acces.log
</dl>
</dir><a name=getResponse#char_*#uint#HTTPRequest><ul><li><b>getResponse</b></li></ul>
</a><dir><font face="Courier New,Courier"><font size=-1>public uint getResponse(char * buffer, uint bufferLength)</font></font><p>  </p>
<dl>
<dt><b>Documentation </b><dd>Metoda ta na podstawie zapytania przeglądarki (podawanego w metodzie
<dd>wyżej, ale podana także tutaj jeszcze raz, tylko tym razem możną ją
<dd>zniszczyć - a nawet trzeba. Bufor przenaczony jest przecież teraz na
<dd>odpowiedź) formułuje nagłówek odpowiedzi. Mogą to już być np. jakieś
<dd>informacje o pliku, który zażyczyła sobie przeglądarka w zapytaniu. 
<dd>Odpowiedź tę umieszcza we wskazanym buforze tekstowym, którego
<dd>wielkość podana jest jako drugi argument.  Naturalnie odpowiedź nie
<dd>może przekroczyć tego rozmiaru, gdyż spowoduje to "SEGMENTATION
<dd>FAULT" i zakończenie bieżącego procesu. Należy się jednak spodziewać,
<dd>że dany bufor będzie miał conajmniej 32 kilobajty, a więc
<dd>wystarczająco dużo.  Metoda ta zwraca długość w bajtach nagłówka
<dd>odpowiedzi, który należy wysłać.
</dl>
</dir><a name=getURI#HTTPRequest><ul><li><b>getURI</b></li></ul>
</a><dir><font face="Courier New,Courier"><font size=-1>public const char * getURI()</font></font><p>  </p>
<dl>
<dt><b>Documentation </b>Zwraca URI bieżącego zapytania. Metoda na potrzeby wpisu w pliku acces.log
</dl>
</dir><a name=isComplete#const_char_*#HTTPRequest><ul><li><b>isComplete</b></li></ul>
</a><dir><font face="Courier New,Courier"><font size=-1>public bool isComplete(const char * request)</font></font><p>  </p>
<dl>
<dt><b>Documentation </b><dd>Metoda prawdza to co nam przysłała przeglądarka (a ja to podaję w
<dd>buforze tekstowym jako string - czyli zakończony znakiem '\0'). 
<dd>Zwraca true, jeśli request jest już odebrany w całości (zwykle
<dd>oznacza to, że kończy się dwoma znakami końca linii '\n' - ale nie
<dd>jest to regułą, choć tak powinno być). Lub zwraca false, jeśli
<dd>request nie jest jeszcze kompletny i należy spodziewać się, że coś z
<dd>sieci zaraz dojdzie. Wtedy metoda ta zostanie wywołana ponownie z
<dd>uzupełnionym buforem.
</dl>
</dir><a name=resolvePathName#char_*#HTTPRequest><ul><li><b>resolvePathName</b></li></ul>
</a><dir><font face="Courier New,Courier"><font size=-1>private const char * resolvePathName(char * )</font></font><p>  </p>
<dl>
<dt><b>Documentation </b>metoda przerabia URI na pełną scieżkę dostępu do pliku
</dl>
</dir><center><h3><a href=_index.html#_index>Return to top</a></h3></center></html>
